% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/method_cunanan.R
\name{analyze_basket.cunanan}
\alias{analyze_basket.cunanan}
\title{Analyze basket trial using Cunanan et al. efficient design}
\usage{
\method{analyze_basket}{cunanan}(
  data,
  design,
  ...,
  gamma = 0.52,
  alpha_s = 0.07,
  alpha_c = 0.05,
  interim_data = NULL
)
}
\arguments{
\item{data}{A \code{basket_data} object containing the trial data}

\item{design}{A \code{basket_design} object containing the design specifications}

\item{...}{Additional arguments (not currently used, for S3 consistency)}

\item{gamma}{Tuning parameter for heterogeneity assessment (0-1). Higher values
favor heterogeneous design path. Default is 0.52 based on K=5 baskets.}

\item{alpha_s}{Significance level for separate analyses in heterogeneous path,
before correction for multiple comparisons. Default is 0.07.}

\item{alpha_c}{Significance level for combined analysis in homogeneous path.
Default is 0.05.}

\item{interim_data}{Optional \code{basket_data} object with stage 1 results. If NULL,
assumes \code{data} represents stage 1.}
}
\value{
A list with class "cunanan_result" containing:
\itemize{
\item \code{rejections}: Logical vector indicating rejected baskets
\item \code{p_values}: P-values for each basket
\item \code{toh_pvalue}: P-value from test of homogeneity (Fisher's exact test)
\item \code{design_path}: Either "heterogeneous" or "homogeneous"
\item \code{continued_baskets}: Baskets that continued to stage 2
\item \code{test_statistics}: Additional test statistics
}
}
\description{
Implements the efficient basket trial design from Cunanan et al. (2017) that
uses an interim assessment of heterogeneity via Fisher's exact test to determine
whether to pool baskets for increased power or analyze them separately.
}
\details{
The Cunanan design has two stages:

\strong{Stage 1}: Enroll n1 patients per basket. Conduct Fisher's exact test on the
K x 2 contingency table of responses/non-responses across baskets.

\strong{Decision at interim}:
\itemize{
\item If p-value <= gamma: Evidence of heterogeneity → heterogeneous path
\itemize{
\item Continue only baskets with >= 1 responder
\item Analyze each basket separately at end with Bonferroni correction (alpha_s/K*)
}
\item If p-value > gamma: Evidence of homogeneity → homogeneous path
\itemize{
\item Continue all baskets if total responses >= K (approximately 1 per basket)
\item Analyze pooled data at end with one-sample test (alpha_c)
}
}

\strong{Stage 2}: Additional patients enrolled according to path chosen
}
\examples{
\dontrun{
# Design for 5 baskets
design <- basket_design(
  n_baskets = 5,
  sample_sizes = c(7, 7, 7, 7, 7),  # Stage 1
  design_type = "cunanan"
)

# Stage 1 data
stage1 <- basket_data(
  basket_names = paste0("Basket", 1:5),
  n_patients = c(7, 7, 7, 7, 7),
  n_responses = c(3, 2, 3, 1, 4)
)

# Analyze
result <- analyze_basket(stage1, design)
}
}
\references{
Cunanan KM, Iasonos A, Shen R, Begg CB, Gönen M (2017). An efficient basket
trial design. \emph{Statistics in Medicine}, 36(10):1568-1579.
doi:10.1002/sim.7227
}
